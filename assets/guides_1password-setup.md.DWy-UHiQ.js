import{_ as a,o as s,c as t,ag as i}from"./chunks/framework.DEqXEGcv.js";const k=JSON.parse('{"title":"1Password Integration","description":"","frontmatter":{},"headers":[],"relativePath":"guides/1password-setup.md","filePath":"guides/1password-setup.md","lastUpdated":1771672675000}'),n={name:"guides/1password-setup.md"};function o(d,e,r,l,h,p){return s(),t("div",null,[...e[0]||(e[0]=[i(`<h1 id="_1password-integration" tabindex="-1">1Password Integration <a class="header-anchor" href="#_1password-integration" aria-label="Permalink to &quot;1Password Integration&quot;">​</a></h1><p>The setup runtime can fetch your <code>.env</code> file directly from a 1Password vault, removing the need to share secrets via files or chat.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li><a href="https://developer.1password.com/docs/cli/" target="_blank" rel="noreferrer">1Password CLI</a> (<code>op</code>) installed</li><li>A 1Password service account or user account with access to the vault</li><li>A secure note or login item in 1Password containing your <code>.env</code> contents</li></ul><h2 id="how-it-works" tabindex="-1">How it works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How it works&quot;">​</a></h2><p>When <code>SETUP_1PASSWORD=true</code> is set in <code>scripts/.env.setup</code>, the setup runtime:</p><ol><li>Reads <code>OP_VAULT_ID</code> and <code>OP_ITEM_ID</code> from <code>scripts/.env.setup</code></li><li>Runs <code>op item get &lt;OP_ITEM_ID&gt; --vault &lt;OP_VAULT_ID&gt;</code> to fetch the item</li><li>Writes the <code>.env</code> file to the project root</li></ol><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><h3 id="_1-find-your-vault-id" tabindex="-1">1. Find your vault ID <a class="header-anchor" href="#_1-find-your-vault-id" aria-label="Permalink to &quot;1. Find your vault ID&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vault</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span></code></pre></div><p>Copy the ID column value for your target vault.</p><h3 id="_2-find-your-item-id" tabindex="-1">2. Find your item ID <a class="header-anchor" href="#_2-find-your-item-id" aria-label="Permalink to &quot;2. Find your item ID&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Your .env item name&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.id&#39;</span></span></code></pre></div><h3 id="_3-set-the-ids-in-scripts-env-setup" tabindex="-1">3. Set the IDs in scripts/.env.setup <a class="header-anchor" href="#_3-set-the-ids-in-scripts-env-setup" aria-label="Permalink to &quot;3. Set the IDs in scripts/.env.setup&quot;">​</a></h3><div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">OP_VAULT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_vault_id_here</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">OP_ITEM_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_item_id_here</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">SETUP_1PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span></code></pre></div><h3 id="_4-authenticate-the-cli" tabindex="-1">4. Authenticate the CLI <a class="header-anchor" href="#_4-authenticate-the-cli" aria-label="Permalink to &quot;4. Authenticate the CLI&quot;">​</a></h3><p>For CI/CD environments use a service account token:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OP_SERVICE_ACCOUNT_TOKEN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ops_...</span></span></code></pre></div><p>For local development, sign in interactively:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">eval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> signin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="fallback-manual-mode" tabindex="-1">Fallback: manual mode <a class="header-anchor" href="#fallback-manual-mode" aria-label="Permalink to &quot;Fallback: manual mode&quot;">​</a></h2><p>Set <code>SETUP_1PASSWORD=false</code> and <code>SETUP_ENV_CHECK=false</code> to skip 1Password and manage <code>.env</code> manually:</p><div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">SETUP_1PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">SETUP_ENV_CHECK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span></code></pre></div><p>Then copy <code>.env.example</code> to <code>.env</code> and fill in the values yourself.</p><h2 id="common-errors" tabindex="-1">Common errors <a class="header-anchor" href="#common-errors" aria-label="Permalink to &quot;Common errors&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Error</th><th>Cause</th><th>Fix</th></tr></thead><tbody><tr><td><code>[ERROR] 401 Unauthorized</code></td><td>Invalid or expired service account token</td><td>Re-generate <code>OP_SERVICE_ACCOUNT_TOKEN</code></td></tr><tr><td><code>[ERROR] Item not found</code></td><td>Wrong <code>OP_ITEM_ID</code></td><td>Run <code>op item get &quot;name&quot; --format json | jq -r &#39;.id&#39;</code></td></tr><tr><td><code>[ERROR] Vault not found</code></td><td>Wrong <code>OP_VAULT_ID</code></td><td>Run <code>op vault list</code> to get the correct ID</td></tr><tr><td><code>op: command not found</code></td><td>1Password CLI not installed</td><td>Install from <a href="https://1password.com/downloads/command-line/" target="_blank" rel="noreferrer">1password.com/downloads/command-line</a></td></tr><tr><td><code>op: not signed in</code></td><td>CLI session expired</td><td>Run <code>eval $(op signin)</code></td></tr><tr><td><code>OP_SERVICE_ACCOUNT_TOKEN not set</code></td><td>Missing env var in CI</td><td>Set the token as a CI secret variable</td></tr></tbody></table><h2 id="dev-container-notes" tabindex="-1">Dev Container notes <a class="header-anchor" href="#dev-container-notes" aria-label="Permalink to &quot;Dev Container notes&quot;">​</a></h2><p>In Dev Containers, 1Password CLI must be installed in the container image or as a feature. If you are not using 1Password in containers, set <code>SETUP_1PASSWORD=false</code> in <code>scripts/.env.setup</code> and provide <code>.env</code> via another mechanism (e.g., a mounted secret or CI variable).</p>`,28)])])}const u=a(n,[["render",o]]);export{k as __pageData,u as default};
