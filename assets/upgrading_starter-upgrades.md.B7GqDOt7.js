import{_ as i,o as a,c as e,ag as t}from"./chunks/framework.DEqXEGcv.js";const c=JSON.parse('{"title":"Starter Upgrades","description":"","frontmatter":{},"headers":[],"relativePath":"upgrading/starter-upgrades.md","filePath":"upgrading/starter-upgrades.md","lastUpdated":1771672675000}'),n={name:"upgrading/starter-upgrades.md"};function p(l,s,r,h,d,k){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="starter-upgrades" tabindex="-1">Starter Upgrades <a class="header-anchor" href="#starter-upgrades" aria-label="Permalink to &quot;Starter Upgrades&quot;">​</a></h1><p>Use this guide for two different upgrade tracks:</p><ol><li>Syncing shared setup runtime (<code>scripts/setup-core</code>) from <code>webentor-setup</code> tags</li><li>Applying starter file transforms between starter versions via <code>webentor-setup upgrade-starter</code></li></ol><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>Keep your working tree clean before running subtree updates.</li><li>Do not place project-specific custom code inside <code>scripts/setup-core</code>.</li><li>Keep project-specific behavior in: <ul><li><code>scripts/.env.setup</code></li><li><code>scripts/hooks/</code></li><li><code>scripts/project-specific/</code></li></ul></li></ul><h2 id="manual-setup-core-update-recommended" tabindex="-1">Manual setup-core update (recommended) <a class="header-anchor" href="#manual-setup-core-update-recommended" aria-label="Permalink to &quot;Manual setup-core update (recommended)&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># in project root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># fetch setup runtime tags (first time: add remote alias)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webentor-setup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/Webikon/webentor-setup.git</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fetch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webentor-setup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tags</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create update branch</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chore/update-setup-core-vX-Y-Z</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pull tagged runtime snapshot into subtree payload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> subtree</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --prefix=scripts/setup-core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webentor-setup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vX.Y.Z</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --squash</span></span></code></pre></div><p>Default source is release tags (<code>vX.Y.Z</code>), not <code>main</code>.</p><h2 id="validation-after-pull" tabindex="-1">Validation after pull <a class="header-anchor" href="#validation-after-pull" aria-label="Permalink to &quot;Validation after pull&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/setup-core/setup.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/setup-core/src/webentor-setup.php</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scripts/setup-core/bin/webentor-setup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><h2 id="commit-and-open-pr" tabindex="-1">Commit and open PR <a class="header-anchor" href="#commit-and-open-pr" aria-label="Permalink to &quot;Commit and open PR&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/setup-core</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;chore(setup): sync setup-core to webentor-setup vX.Y.Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chore/update-setup-core-vX-Y-Z</span></span></code></pre></div><h2 id="version-to-version-starter-upgrade" tabindex="-1">Version-to-version starter upgrade <a class="header-anchor" href="#version-to-version-starter-upgrade" aria-label="Permalink to &quot;Version-to-version starter upgrade&quot;">​</a></h2><p>Use this when moving project starter contract from one version to another: for example <code>1.0.0</code> to <code>1.1.0</code>.</p><h3 id="_1-dry-run-first" tabindex="-1">1) Dry-run first <a class="header-anchor" href="#_1-dry-run-first" aria-label="Permalink to &quot;1) Dry-run first&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scripts/setup-core/bin/webentor-setup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade-starter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --from</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">current-starter-versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">target-starter-versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --cwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --dry-run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div><p>This command generates:</p><ul><li>console summary</li><li>markdown report at <code>upgrade-report-&lt;from&gt;-to-&lt;to&gt;.md</code></li></ul><p>Review the report before applying changes.</p><h3 id="_2-apply-transforms" tabindex="-1">2) Apply transforms <a class="header-anchor" href="#_2-apply-transforms" aria-label="Permalink to &quot;2) Apply transforms&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scripts/setup-core/bin/webentor-setup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade-starter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --from</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">current-starter-versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">target-starter-versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --cwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --dry-run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span></code></pre></div><h3 id="_3-validate-after-apply" tabindex="-1">3) Validate after apply <a class="header-anchor" href="#_3-validate-after-apply" aria-label="Permalink to &quot;3) Validate after apply&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scripts/setup-core/bin/webentor-setup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/setup.sh</span></span></code></pre></div><h3 id="transform-behavior" tabindex="-1">Transform behavior <a class="header-anchor" href="#transform-behavior" aria-label="Permalink to &quot;Transform behavior&quot;">​</a></h3><p><code>upgrade-starter</code> reads manifest from: <code>scripts/setup-core/upgrades/&lt;target-version&gt;/manifest.json</code></p><p>Current transform types:</p><ul><li><code>remove_path</code></li><li><code>replace_text</code></li><li><code>ensure_directory</code></li></ul><p>Project-owned paths are intentionally protected and skipped:</p><ul><li><code>scripts/.env.setup</code></li><li><code>scripts/hooks/</code></li><li><code>scripts/project-specific/</code></li></ul><p><code>.webentor/project.json</code> is updated by the command to track new starter version metadata.</p><h2 id="conflict-handling" tabindex="-1">Conflict handling <a class="header-anchor" href="#conflict-handling" aria-label="Permalink to &quot;Conflict handling&quot;">​</a></h2><ul><li>If conflicts occur inside <code>scripts/setup-core</code>, resolve them with minimal changes.</li><li>If the conflict is project-specific behavior, move that behavior to <code>scripts/.env.setup</code>, <code>scripts/hooks/</code>, or <code>scripts/project-specific/</code> and keep <code>scripts/setup-core</code> generic.</li></ul>`,32)])])}const F=i(n,[["render",p]]);export{c as __pageData,F as default};
