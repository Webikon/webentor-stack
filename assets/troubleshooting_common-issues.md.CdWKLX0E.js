import{_ as i,o as a,c as e,ag as t}from"./chunks/framework.DEqXEGcv.js";const k=JSON.parse('{"title":"Troubleshooting","description":"","frontmatter":{},"headers":[],"relativePath":"troubleshooting/common-issues.md","filePath":"troubleshooting/common-issues.md","lastUpdated":1771672675000}'),n={name:"troubleshooting/common-issues.md"};function o(l,s,r,p,h,d){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h1><h2 id="registry-auth-errors" tabindex="-1">Registry auth errors <a class="header-anchor" href="#registry-auth-errors" aria-label="Permalink to &quot;Registry auth errors&quot;">​</a></h2><ul><li>Confirm npm auth for GitHub Packages.</li><li>Confirm Composer auth for private packages.</li></ul><h2 id="hook-conflicts" tabindex="-1">Hook conflicts <a class="header-anchor" href="#hook-conflicts" aria-label="Permalink to &quot;Hook conflicts&quot;">​</a></h2><ul><li>Keep custom logic in <code>scripts/hooks/</code> or <code>scripts/project-specific/</code>.</li><li>Avoid editing shared subtree files directly.</li></ul><h2 id="subtree-sync-issues" tabindex="-1">Subtree sync issues <a class="header-anchor" href="#subtree-sync-issues" aria-label="Permalink to &quot;Subtree sync issues&quot;">​</a></h2><ul><li>Re-sync setup subtree from <code>webentor-setup</code> and re-run <code>webentor-setup doctor</code>.</li></ul><h2 id="upgrade-manifest-not-found" tabindex="-1">Upgrade manifest not found <a class="header-anchor" href="#upgrade-manifest-not-found" aria-label="Permalink to &quot;Upgrade manifest not found&quot;">​</a></h2><ul><li><code>upgrade-starter</code> requires <code>scripts/setup-core/upgrades/&lt;target&gt;/manifest.json</code>.</li><li>Sync <code>scripts/setup-core</code> to a <code>webentor-setup</code> tag that contains your target manifest, then run dry-run again.</li></ul><h2 id="missing-setup-metadata-file" tabindex="-1">Missing setup metadata file <a class="header-anchor" href="#missing-setup-metadata-file" aria-label="Permalink to &quot;Missing setup metadata file&quot;">​</a></h2><ul><li>If <code>webentor-setup doctor</code> reports missing <code>.webentor/project.json</code>, run: <code>scripts/setup-core/bin/webentor-setup init --project &lt;slug&gt; --starter-version &lt;version&gt; --with-db-sync false --env-source 1password --ci-provider gitlab</code></li><li>Commit <code>.webentor/project.json</code> after initialization.</li></ul><hr><h2 id="setup-fails-at-environment-check-step" tabindex="-1">Setup fails at environment check step <a class="header-anchor" href="#setup-fails-at-environment-check-step" aria-label="Permalink to &quot;Setup fails at environment check step&quot;">​</a></h2><p><strong>Symptom:</strong> Setup exits with <code>env-check failed</code> or a tool is reported as missing.</p><p><strong>Causes and fixes:</strong></p><table tabindex="0"><thead><tr><th>Missing tool</th><th>Fix</th></tr></thead><tbody><tr><td><code>php</code></td><td>Install PHP 8.3+ via <a href="https://herd.laravel.com/" target="_blank" rel="noreferrer">Herd</a> (macOS) or <a href="https://laragon.org/" target="_blank" rel="noreferrer">Laragon</a> (Windows)</td></tr><tr><td><code>composer</code></td><td>Install from <a href="https://getcomposer.org/" target="_blank" rel="noreferrer">getcomposer.org</a></td></tr><tr><td><code>pnpm</code></td><td>Run <code>npm install -g pnpm</code> or <code>corepack enable &amp;&amp; corepack prepare pnpm@latest --activate</code></td></tr><tr><td><code>node</code></td><td>Install Node 20+ via <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noreferrer">nvm</a> or <a href="https://github.com/Schniz/fnm" target="_blank" rel="noreferrer">fnm</a></td></tr><tr><td><code>op</code> (1Password CLI)</td><td>Install from <a href="https://1password.com/downloads/command-line/" target="_blank" rel="noreferrer">1password.com/downloads/command-line</a></td></tr></tbody></table><p>To skip the env check entirely:</p><div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># scripts/.env.setup</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">SETUP_ENV_CHECK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span></code></pre></div><hr><h2 id="_1password-fetch-fails" tabindex="-1">1Password fetch fails <a class="header-anchor" href="#_1password-fetch-fails" aria-label="Permalink to &quot;1Password fetch fails&quot;">​</a></h2><p><strong>Symptom:</strong> Setup exits with <code>401 Unauthorized</code>, <code>Item not found</code>, or <code>op: command not found</code>.</p><p>See the full <a href="./../guides/1password-setup.html">1Password setup guide</a> for detailed steps and a complete error reference table.</p><p><strong>Quick checks:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify CLI is installed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">op</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify you are signed in</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> account</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Test fetching your item</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> item</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$OP_ITEM_ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --vault</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$OP_VAULT_ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><hr><h2 id="composer-install-fails" tabindex="-1">Composer install fails <a class="header-anchor" href="#composer-install-fails" aria-label="Permalink to &quot;Composer install fails&quot;">​</a></h2><p><strong>Private package auth error:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http-basic.composer.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> username</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> token</span></span></code></pre></div><p>Or add auth to <code>auth.json</code> in the project root (do not commit this file).</p><p><strong>Timeout errors:</strong> Increase Composer process timeout:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">COMPOSER_PROCESS_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">600</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><hr><h2 id="npm-pnpm-install-fails" tabindex="-1">npm/pnpm install fails <a class="header-anchor" href="#npm-pnpm-install-fails" aria-label="Permalink to &quot;npm/pnpm install fails&quot;">​</a></h2><p><strong>Node version mismatch:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # check current version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .nvmrc</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # check required version (if present)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # switch version</span></span></code></pre></div><p><strong>Workspace resolution error:</strong> Run from the theme root, not the project root:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web/app/themes/webentor-theme-v2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><hr><h2 id="git-subtree-pull-conflicts" tabindex="-1">Git subtree pull conflicts <a class="header-anchor" href="#git-subtree-pull-conflicts" aria-label="Permalink to &quot;Git subtree pull conflicts&quot;">​</a></h2><p>When pulling a <code>setup-core</code> update results in merge conflicts:</p><ol><li>Identify conflicting files: <code>git status</code></li><li><strong>Do not</strong> accept the <code>setup-core</code> version for files in <code>scripts/hooks/</code>, <code>scripts/project-specific/</code>, or <code>scripts/.env.setup</code> — these are project-owned.</li><li>Accept the incoming version for all other files in <code>scripts/setup-core/</code></li><li>Commit the merge resolution</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Accept incoming for a setup-core file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --theirs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/setup-core/common.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/setup-core/common.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Keep your version for a project-owned file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ours</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/hooks/post-deps.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/hooks/post-deps.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Resolve setup-core subtree merge conflicts&quot;</span></span></code></pre></div><hr><h2 id="grumphp-pre-commit-hook-fails" tabindex="-1">GrumPHP / pre-commit hook fails <a class="header-anchor" href="#grumphp-pre-commit-hook-fails" aria-label="Permalink to &quot;GrumPHP / pre-commit hook fails&quot;">​</a></h2><p><strong>Hook exits with a lint error:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run lint manually to see the full output</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lint</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # JS/CSS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lint:php</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # PHP (from theme directory)</span></span></code></pre></div><p><strong>Hook not found / not executable:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Re-install husky hooks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prepare</span></span></code></pre></div><p><strong>Skip hooks temporarily (use sparingly):</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;WIP&quot;</span></span></code></pre></div><hr><h2 id="windows-powershell-vs-git-bash" tabindex="-1">Windows: PowerShell vs Git Bash <a class="header-anchor" href="#windows-powershell-vs-git-bash" aria-label="Permalink to &quot;Windows: PowerShell vs Git Bash&quot;">​</a></h2><p>The setup scripts require a bash-compatible shell. On Windows:</p><ul><li>Use <strong>Git Bash</strong> (bundled with Git for Windows) or <strong>WSL2</strong></li><li>Do <strong>not</strong> run <code>setup.sh</code> from PowerShell or Command Prompt</li><li>Herd and Laragon users: open Git Bash from the project root</li></ul><hr><h2 id="dev-container-setup-times-out-or-1password-cli-not-found" tabindex="-1">Dev Container setup times out or 1Password CLI not found <a class="header-anchor" href="#dev-container-setup-times-out-or-1password-cli-not-found" aria-label="Permalink to &quot;Dev Container setup times out or 1Password CLI not found&quot;">​</a></h2><ul><li>Ensure Docker Desktop is running before opening in a Dev Container</li><li>If 1Password CLI is not available in the container:<div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># scripts/.env.setup</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">SETUP_1PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span></code></pre></div>Then provide <code>.env</code> via a Docker volume mount or CI secret</li><li>For slow first-time builds: increase Docker Desktop memory limit to at least 4 GB</li></ul>`,57)])])}const g=i(n,[["render",o]]);export{k as __pageData,g as default};
